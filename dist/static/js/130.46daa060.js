(self["webpackChunkmine_live_web"]=self["webpackChunkmine_live_web"]||[]).push([[130],{6543:function(e){(function(t,n){e.exports=n()})(0,(function(){"use strict";var e=function(){},t=Object.prototype.hasOwnProperty,n=Array.prototype.slice;function i(t,n){var i;return"function"===typeof Object.create?i=Object.create(t):(e.prototype=t,i=new e,e.prototype=null),n&&a(!0,i,n),i}function o(e,t,n,o){var r=this;return"string"!==typeof e&&(o=n,n=t,t=e,e=null),"function"!==typeof t&&(o=n,n=t,t=function(){return r.apply(this,arguments)}),a(!1,t,r,o),t.prototype=i(r.prototype,n),t.prototype.constructor=t,t.class_=e||r.class_,t.super_=r,t}function a(e,i,o){var a,r;o=n.call(arguments,2);for(var s=0,c=o.length;s<c;s++)for(a in r=o[s],r)e&&!t.call(r,a)||(i[a]=r[a])}var r=o;function s(){}s.class_="Nevis",s.super_=Object,s.extend=r;var c=s,l=c,d=l.extend((function(e,t,n){this.qrious=e,this.element=t,this.element.qrious=e,this.enabled=Boolean(n)}),{draw:function(e){},getElement:function(){return this.enabled||(this.enabled=!0,this.render()),this.element},getModuleSize:function(e){var t=this.qrious,n=t.padding||0,i=Math.floor((t.size-2*n)/e.width);return Math.max(1,i)},getOffset:function(e){var t=this.qrious,n=t.padding;if(null!=n)return n;var i=this.getModuleSize(e),o=Math.floor((t.size-i*e.width)/2);return Math.max(0,o)},render:function(e){this.enabled&&(this.resize(),this.reset(),this.draw(e))},reset:function(){},resize:function(){}}),u=d,h=u.extend({draw:function(e){var t,n,i=this.qrious,o=this.getModuleSize(e),a=this.getOffset(e),r=this.element.getContext("2d");for(r.fillStyle=i.foreground,r.globalAlpha=i.foregroundAlpha,t=0;t<e.width;t++)for(n=0;n<e.width;n++)e.buffer[n*e.width+t]&&r.fillRect(o*t+a,o*n+a,o,o)},reset:function(){var e=this.qrious,t=this.element.getContext("2d"),n=e.size;t.lineWidth=1,t.clearRect(0,0,n,n),t.fillStyle=e.background,t.globalAlpha=e.backgroundAlpha,t.fillRect(0,0,n,n)},resize:function(){var e=this.element;e.width=e.height=this.qrious.size}}),m=h,f=l.extend(null,{BLOCK:[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28]}),g=f,p=l.extend(null,{BLOCKS:[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],FINAL_FORMAT:[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],LEVELS:{L:1,M:2,Q:3,H:4}}),v=p,k=l.extend(null,{EXPONENT:[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],LOG:[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175]}),_=k,y=l.extend(null,{BLOCK:[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177]}),b=y,B=l.extend((function(e){var t,n,i,o,a,r=e.value.length;this._badness=[],this._level=v.LEVELS[e.level],this._polynomial=[],this._value=e.value,this._version=0,this._stringBuffer=[];while(this._version<40)if(this._version++,i=4*(this._level-1)+16*(this._version-1),o=v.BLOCKS[i++],a=v.BLOCKS[i++],t=v.BLOCKS[i++],n=v.BLOCKS[i],i=t*(o+a)+a-3+(this._version<=9),r<=i)break;this._dataBlock=t,this._eccBlock=n,this._neccBlock1=o,this._neccBlock2=a;var s=this.width=17+4*this._version;this.buffer=B._createArray(s*s),this._ecc=B._createArray(t+(t+n)*(o+a)+a),this._mask=B._createArray((s*(s+1)+1)/2),this._insertFinders(),this._insertAlignments(),this.buffer[8+s*(s-8)]=1,this._insertTimingGap(),this._reverseMask(),this._insertTimingRowAndColumn(),this._insertVersion(),this._syncMask(),this._convertBitStream(r),this._calculatePolynomial(),this._appendEccToData(),this._interleaveBlocks(),this._pack(),this._finish()}),{_addAlignment:function(e,t){var n,i=this.buffer,o=this.width;for(i[e+o*t]=1,n=-2;n<2;n++)i[e+n+o*(t-2)]=1,i[e-2+o*(t+n+1)]=1,i[e+2+o*(t+n)]=1,i[e+n+1+o*(t+2)]=1;for(n=0;n<2;n++)this._setMask(e-1,t+n),this._setMask(e+1,t-n),this._setMask(e-n,t-1),this._setMask(e+n,t+1)},_appendData:function(e,t,n,i){var o,a,r,s=this._polynomial,c=this._stringBuffer;for(a=0;a<i;a++)c[n+a]=0;for(a=0;a<t;a++){if(o=_.LOG[c[e+a]^c[n]],255!==o)for(r=1;r<i;r++)c[n+r-1]=c[n+r]^_.EXPONENT[B._modN(o+s[i-r])];else for(r=n;r<n+i;r++)c[r]=c[r+1];c[n+i-1]=255===o?0:_.EXPONENT[B._modN(o+s[0])]}},_appendEccToData:function(){var e,t=0,n=this._dataBlock,i=this._calculateMaxLength(),o=this._eccBlock;for(e=0;e<this._neccBlock1;e++)this._appendData(t,n,i,o),t+=n,i+=o;for(e=0;e<this._neccBlock2;e++)this._appendData(t,n+1,i,o),t+=n+1,i+=o},_applyMask:function(e){var t,n,i,o,a=this.buffer,r=this.width;switch(e){case 0:for(o=0;o<r;o++)for(i=0;i<r;i++)i+o&1||this._isMasked(i,o)||(a[i+o*r]^=1);break;case 1:for(o=0;o<r;o++)for(i=0;i<r;i++)1&o||this._isMasked(i,o)||(a[i+o*r]^=1);break;case 2:for(o=0;o<r;o++)for(t=0,i=0;i<r;i++,t++)3===t&&(t=0),t||this._isMasked(i,o)||(a[i+o*r]^=1);break;case 3:for(n=0,o=0;o<r;o++,n++)for(3===n&&(n=0),t=n,i=0;i<r;i++,t++)3===t&&(t=0),t||this._isMasked(i,o)||(a[i+o*r]^=1);break;case 4:for(o=0;o<r;o++)for(t=0,n=o>>1&1,i=0;i<r;i++,t++)3===t&&(t=0,n=!n),n||this._isMasked(i,o)||(a[i+o*r]^=1);break;case 5:for(n=0,o=0;o<r;o++,n++)for(3===n&&(n=0),t=0,i=0;i<r;i++,t++)3===t&&(t=0),(i&o&1)+!(!t|!n)||this._isMasked(i,o)||(a[i+o*r]^=1);break;case 6:for(n=0,o=0;o<r;o++,n++)for(3===n&&(n=0),t=0,i=0;i<r;i++,t++)3===t&&(t=0),(i&o&1)+(t&&t===n)&1||this._isMasked(i,o)||(a[i+o*r]^=1);break;case 7:for(n=0,o=0;o<r;o++,n++)for(3===n&&(n=0),t=0,i=0;i<r;i++,t++)3===t&&(t=0),(t&&t===n)+(i+o&1)&1||this._isMasked(i,o)||(a[i+o*r]^=1);break}},_calculateMaxLength:function(){return this._dataBlock*(this._neccBlock1+this._neccBlock2)+this._neccBlock2},_calculatePolynomial:function(){var e,t,n=this._eccBlock,i=this._polynomial;for(i[0]=1,e=0;e<n;e++){for(i[e+1]=1,t=e;t>0;t--)i[t]=i[t]?i[t-1]^_.EXPONENT[B._modN(_.LOG[i[t]]+e)]:i[t-1];i[0]=_.EXPONENT[B._modN(_.LOG[i[0]]+e)]}for(e=0;e<=n;e++)i[e]=_.LOG[i[e]]},_checkBadness:function(){var e,t,n,i,o,a=0,r=this._badness,s=this.buffer,c=this.width;for(o=0;o<c-1;o++)for(i=0;i<c-1;i++)(s[i+c*o]&&s[i+1+c*o]&&s[i+c*(o+1)]&&s[i+1+c*(o+1)]||!(s[i+c*o]||s[i+1+c*o]||s[i+c*(o+1)]||s[i+1+c*(o+1)]))&&(a+=B.N2);var l=0;for(o=0;o<c;o++){for(n=0,r[0]=0,e=0,i=0;i<c;i++)t=s[i+c*o],e===t?r[n]++:r[++n]=1,e=t,l+=e?1:-1;a+=this._getBadness(n)}l<0&&(l=-l);var d=0,u=l;u+=u<<2,u<<=1;while(u>c*c)u-=c*c,d++;for(a+=d*B.N4,i=0;i<c;i++){for(n=0,r[0]=0,e=0,o=0;o<c;o++)t=s[i+c*o],e===t?r[n]++:r[++n]=1,e=t;a+=this._getBadness(n)}return a},_convertBitStream:function(e){var t,n,i=this._ecc,o=this._version;for(n=0;n<e;n++)i[n]=this._value.charCodeAt(n);var a=this._stringBuffer=i.slice(),r=this._calculateMaxLength();e>=r-2&&(e=r-2,o>9&&e--);var s=e;if(o>9){a[s+2]=0,a[s+3]=0;while(s--)t=a[s],a[s+3]|=255&t<<4,a[s+2]=t>>4;a[2]|=255&e<<4,a[1]=e>>4,a[0]=64|e>>12}else{a[s+1]=0,a[s+2]=0;while(s--)t=a[s],a[s+2]|=255&t<<4,a[s+1]=t>>4;a[1]|=255&e<<4,a[0]=64|e>>4}s=e+3-(o<10);while(s<r)a[s++]=236,a[s++]=17},_getBadness:function(e){var t,n=0,i=this._badness;for(t=0;t<=e;t++)i[t]>=5&&(n+=B.N1+i[t]-5);for(t=3;t<e-1;t+=2)i[t-2]===i[t+2]&&i[t+2]===i[t-1]&&i[t-1]===i[t+1]&&3*i[t-1]===i[t]&&(0===i[t-3]||t+3>e||3*i[t-3]>=4*i[t]||3*i[t+3]>=4*i[t])&&(n+=B.N3);return n},_finish:function(){var e,t;this._stringBuffer=this.buffer.slice();var n=0,i=3e4;for(t=0;t<8;t++){if(this._applyMask(t),e=this._checkBadness(),e<i&&(i=e,n=t),7===n)break;this.buffer=this._stringBuffer.slice()}n!==t&&this._applyMask(n),i=v.FINAL_FORMAT[n+(this._level-1<<3)];var o=this.buffer,a=this.width;for(t=0;t<8;t++,i>>=1)1&i&&(o[a-1-t+8*a]=1,t<6?o[8+a*t]=1:o[8+a*(t+1)]=1);for(t=0;t<7;t++,i>>=1)1&i&&(o[8+a*(a-7+t)]=1,t?o[6-t+8*a]=1:o[7+8*a]=1)},_interleaveBlocks:function(){var e,t,n=this._dataBlock,i=this._ecc,o=this._eccBlock,a=0,r=this._calculateMaxLength(),s=this._neccBlock1,c=this._neccBlock2,l=this._stringBuffer;for(e=0;e<n;e++){for(t=0;t<s;t++)i[a++]=l[e+t*n];for(t=0;t<c;t++)i[a++]=l[s*n+e+t*(n+1)]}for(t=0;t<c;t++)i[a++]=l[s*n+e+t*(n+1)];for(e=0;e<o;e++)for(t=0;t<s+c;t++)i[a++]=l[r+e+t*o];this._stringBuffer=i},_insertAlignments:function(){var e,t,n,i=this._version,o=this.width;if(i>1)for(e=g.BLOCK[i],n=o-7;;){t=o-7;while(t>e-3){if(this._addAlignment(t,n),t<e)break;t-=e}if(n<=e+9)break;n-=e,this._addAlignment(6,n),this._addAlignment(n,6)}},_insertFinders:function(){var e,t,n,i,o=this.buffer,a=this.width;for(e=0;e<3;e++){for(t=0,i=0,1===e&&(t=a-7),2===e&&(i=a-7),o[i+3+a*(t+3)]=1,n=0;n<6;n++)o[i+n+a*t]=1,o[i+a*(t+n+1)]=1,o[i+6+a*(t+n)]=1,o[i+n+1+a*(t+6)]=1;for(n=1;n<5;n++)this._setMask(i+n,t+1),this._setMask(i+1,t+n+1),this._setMask(i+5,t+n),this._setMask(i+n+1,t+5);for(n=2;n<4;n++)o[i+n+a*(t+2)]=1,o[i+2+a*(t+n+1)]=1,o[i+4+a*(t+n)]=1,o[i+n+1+a*(t+4)]=1}},_insertTimingGap:function(){var e,t,n=this.width;for(t=0;t<7;t++)this._setMask(7,t),this._setMask(n-8,t),this._setMask(7,t+n-7);for(e=0;e<8;e++)this._setMask(e,7),this._setMask(e+n-8,7),this._setMask(e,n-8)},_insertTimingRowAndColumn:function(){var e,t=this.buffer,n=this.width;for(e=0;e<n-14;e++)1&e?(this._setMask(8+e,6),this._setMask(6,8+e)):(t[8+e+6*n]=1,t[6+n*(8+e)]=1)},_insertVersion:function(){var e,t,n,i,o=this.buffer,a=this._version,r=this.width;if(a>6)for(e=b.BLOCK[a-7],t=17,n=0;n<6;n++)for(i=0;i<3;i++,t--)1&(t>11?a>>t-12:e>>t)?(o[5-n+r*(2-i+r-11)]=1,o[2-i+r-11+r*(5-n)]=1):(this._setMask(5-n,2-i+r-11),this._setMask(2-i+r-11,5-n))},_isMasked:function(e,t){var n=B._getMaskBit(e,t);return 1===this._mask[n]},_pack:function(){var e,t,n,i=1,o=1,a=this.width,r=a-1,s=a-1,c=(this._dataBlock+this._eccBlock)*(this._neccBlock1+this._neccBlock2)+this._neccBlock2;for(t=0;t<c;t++)for(e=this._stringBuffer[t],n=0;n<8;n++,e<<=1){128&e&&(this.buffer[r+a*s]=1);do{o?r--:(r++,i?0!==s?s--:(r-=2,i=!i,6===r&&(r--,s=9)):s!==a-1?s++:(r-=2,i=!i,6===r&&(r--,s-=8))),o=!o}while(this._isMasked(r,s))}},_reverseMask:function(){var e,t,n=this.width;for(e=0;e<9;e++)this._setMask(e,8);for(e=0;e<8;e++)this._setMask(e+n-8,8),this._setMask(8,e);for(t=0;t<7;t++)this._setMask(8,t+n-7)},_setMask:function(e,t){var n=B._getMaskBit(e,t);this._mask[n]=1},_syncMask:function(){var e,t,n=this.width;for(t=0;t<n;t++)for(e=0;e<=t;e++)this.buffer[e+n*t]&&this._setMask(e,t)}},{_createArray:function(e){var t,n=[];for(t=0;t<e;t++)n[t]=0;return n},_getMaskBit:function(e,t){var n;return e>t&&(n=e,e=t,t=n),n=t,n+=t*t,n>>=1,n+=e,n},_modN:function(e){while(e>=255)e-=255,e=(e>>8)+(255&e);return e},N1:3,N2:3,N3:40,N4:10}),E=B,w=u.extend({draw:function(){this.element.src=this.qrious.toDataURL()},reset:function(){this.element.src=""},resize:function(){var e=this.element;e.width=e.height=this.qrious.size}}),L=w,x=l.extend((function(e,t,n,i){this.name=e,this.modifiable=Boolean(t),this.defaultValue=n,this._valueTransformer=i}),{transform:function(e){var t=this._valueTransformer;return"function"===typeof t?t(e,this):e}}),C=x,I=l.extend(null,{abs:function(e){return null!=e?Math.abs(e):null},hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},noop:function(){},toUpperCase:function(e){return null!=e?e.toUpperCase():null}}),A=I,F=l.extend((function(e){this.options={},e.forEach((function(e){this.options[e.name]=e}),this)}),{exists:function(e){return null!=this.options[e]},get:function(e,t){return F._get(this.options[e],t)},getAll:function(e){var t,n=this.options,i={};for(t in n)A.hasOwn(n,t)&&(i[t]=F._get(n[t],e));return i},init:function(e,t,n){var i,o;for(i in"function"!==typeof n&&(n=A.noop),this.options)A.hasOwn(this.options,i)&&(o=this.options[i],F._set(o,o.defaultValue,t),F._createAccessor(o,t,n));this._setAll(e,t,!0)},set:function(e,t,n){return this._set(e,t,n)},setAll:function(e,t){return this._setAll(e,t)},_set:function(e,t,n,i){var o=this.options[e];if(!o)throw new Error("Invalid option: "+e);if(!o.modifiable&&!i)throw new Error("Option cannot be modified: "+e);return F._set(o,t,n)},_setAll:function(e,t,n){if(!e)return!1;var i,o=!1;for(i in e)A.hasOwn(e,i)&&this._set(i,e[i],t,n)&&(o=!0);return o}},{_createAccessor:function(e,t,n){var i={get:function(){return F._get(e,t)}};e.modifiable&&(i.set=function(i){F._set(e,i,t)&&n(i,e)}),Object.defineProperty(t,e.name,i)},_get:function(e,t){return t["_"+e.name]},_set:function(e,t,n){var i="_"+e.name,o=n[i],a=e.transform(null!=t?t:e.defaultValue);return n[i]=a,a!==o}}),M=F,T=l.extend((function(){this._services={}}),{getService:function(e){var t=this._services[e];if(!t)throw new Error("Service is not being managed with name: "+e);return t},setService:function(e,t){if(this._services[e])throw new Error("Service is already managed with name: "+e);t&&(this._services[e]=t)}}),O=T,S=new M([new C("background",!0,"white"),new C("backgroundAlpha",!0,1,A.abs),new C("element"),new C("foreground",!0,"black"),new C("foregroundAlpha",!0,1,A.abs),new C("level",!0,"L",A.toUpperCase),new C("mime",!0,"image/png"),new C("padding",!0,null,A.abs),new C("size",!0,100,A.abs),new C("value",!0,"")]),D=new O,N=l.extend((function(e){S.init(e,this,this.update.bind(this));var t=S.get("element",this),n=D.getService("element"),i=t&&n.isCanvas(t)?t:n.createCanvas(),o=t&&n.isImage(t)?t:n.createImage();this._canvasRenderer=new m(this,i,!0),this._imageRenderer=new L(this,o,o===t),this.update()}),{get:function(){return S.getAll(this)},set:function(e){S.setAll(e,this)&&this.update()},toDataURL:function(e){return this.canvas.toDataURL(e||this.mime)},update:function(){var e=new E({level:this.level,value:this.value});this._canvasRenderer.render(e),this._imageRenderer.render(e)}},{use:function(e){D.setService(e.getName(),e)}});Object.defineProperties(N.prototype,{canvas:{get:function(){return this._canvasRenderer.getElement()}},image:{get:function(){return this._imageRenderer.getElement()}}});var P=N,W=P,z=l.extend({getName:function(){}}),j=z,U=j.extend({createCanvas:function(){},createImage:function(){},getName:function(){return"element"},isCanvas:function(e){},isImage:function(e){}}),q=U,R=q.extend({createCanvas:function(){return document.createElement("canvas")},createImage:function(){return document.createElement("img")},isCanvas:function(e){return e instanceof HTMLCanvasElement},isImage:function(e){return e instanceof HTMLImageElement}}),H=R;W.use(new H);var V=W;return V}))},1631:function(e,t,n){"use strict";n.d(t,{A:function(){return a},F:function(){return o}});n(4114);var i=n(5098);const o="https://api.minelive.top";function a(){const e=localStorage.getItem("userToken");if(e)return e;i.A.push("/?login=1")}},5324:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});n(4114);var i=n(5098);function o(){const e=localStorage.getItem("userAdmin");if(e&&"true"===e){const e=document.createElement("mdui-navigation-rail-item");e.icon="manage_accounts",e.addEventListener("click",(function(){i.A.push("/admin")})),e.innerHTML="管理",document.getElementById("rail").appendChild(e)}}},8130:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return oe}});var i=n(6768);const o=(0,i.Lk)("div",{style:{"margin-left":"80px"}},null,-1),a=(0,i.Lk)("img",{src:"https://s21.ax1x.com/2024/04/07/pFq2AoR.png",alt:"alternative",style:{width:"2.5rem",height:"2.5rem"}},null,-1),r=(0,i.Lk)("div",{style:{"margin-left":"1px"}},null,-1),s=(0,i.Lk)("table",{class:"mdui-table mdui-table-striped"},[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"名称"),(0,i.Lk)("th",null,"推流地址"),(0,i.Lk)("th",null,"推流密钥"),(0,i.Lk)("th",null,"素材名称"),(0,i.Lk)("th",null,"剩余时长"),(0,i.Lk)("th",null,"当前状态"),(0,i.Lk)("th",null,"操作")])]),(0,i.Lk)("tbody",{id:"material-list-tbody"})],-1),c={style:{display:"flex","align-items":"center"}},l=(0,i.Lk)("p",null,"订单价格",-1),d=(0,i.Lk)("div",{style:{"flex-grow":"1"}},null,-1),u=(0,i.Lk)("h3",{id:"priceText"},"0 元",-1),h=(0,i.Lk)("div",{style:{"flex-grow":"1"}},null,-1),m={style:{display:"flex","align-items":"center"}},f=(0,i.Lk)("p",{style:{"margin-right":"1px"}},"购买月数",-1),g={style:{display:"flex","align-items":"center"}},p=(0,i.Lk)("p",{style:{"margin-right":"1px"}},"素材类型",-1),v=(0,i.Lk)("div",{style:{"flex-grow":"1"}},null,-1),k=(0,i.Lk)("p",null,"距离到期",-1),_=(0,i.Lk)("h3",{id:"lastDayText"},"0 元",-1),y=(0,i.Lk)("p",null,"预估价格",-1),b=(0,i.Lk)("h3",{id:"updatePriceText"},"0 元",-1),B=(0,i.Lk)("div",{id:"qrcode"},null,-1),E=(0,i.Lk)("div",{id:"logDiv"},null,-1),w=(0,i.Lk)("br",null,null,-1);function L(e,t,n,L,x,C){const I=(0,i.g2)("mdui-top-app-bar-title"),A=(0,i.g2)("mdui-button-icon"),F=(0,i.g2)("mdui-tooltip"),M=(0,i.g2)("mdui-top-app-bar"),T=(0,i.g2)("mdui-navigation-rail-item"),O=(0,i.g2)("mdui-navigation-rail"),S=(0,i.g2)("mdui-table-fluid"),D=(0,i.g2)("mdui-container"),N=(0,i.g2)("mdui-segmented-button"),P=(0,i.g2)("mdui-segmented-button-group"),W=(0,i.g2)("mdui-button"),z=(0,i.g2)("mdui-dialog"),j=(0,i.g2)("mdui-slider"),U=(0,i.g2)("mdui-radio"),q=(0,i.g2)("mdui-radio-group"),R=(0,i.g2)("mdui-text-field"),H=(0,i.g2)("mdui-select");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(M,{"scroll-behavior":"elevate",style:{"background-color":"rgba(var(--mdui-color-primary-container, 0.8))"}},{default:(0,i.k6)((()=>[o,a,(0,i.bF)(I,null,{default:(0,i.k6)((()=>[(0,i.eW)("推流列表")])),_:1}),(0,i.bF)(F,{content:"创建推流"},{default:(0,i.k6)((()=>[(0,i.bF)(A,{variant:"filled",icon:"add",id:"createStreamBtn"})])),_:1}),r,(0,i.bF)(F,{content:"刷新列表"},{default:(0,i.k6)((()=>[(0,i.bF)(A,{variant:"filled",icon:"refresh",id:"refreshBtn"})])),_:1})])),_:1}),(0,i.bF)(O,{divider:"","padding-left":"",id:"rail",value:"stream"},{default:(0,i.k6)((()=>[(0,i.bF)(T,{icon:"videocam",id:"streamBtn",value:"stream"},{default:(0,i.k6)((()=>[(0,i.eW)("推流")])),_:1}),(0,i.bF)(T,{icon:"topic",id:"materialBtn",value:"material"},{default:(0,i.k6)((()=>[(0,i.eW)("素材")])),_:1}),(0,i.bF)(T,{icon:"help_center",href:"https://www.yuque.com/seeds-ejjgd/py7vim",target:"_blank",id:"groupBtn",value:"help"},{default:(0,i.k6)((()=>[(0,i.eW)("教程")])),_:1}),(0,i.bF)(T,{icon:"group",href:"https://qm.qq.com/q/hpYH0xIsuY",target:"_blank",id:"groupBtn",value:"group"},{default:(0,i.k6)((()=>[(0,i.eW)("加群")])),_:1}),(0,i.bF)(T,{icon:"local_fire_department",href:"https://www.beishaoidc.cn/aff/TKYYFUGE",target:"_blank",id:"adv",value:"adv"},{default:(0,i.k6)((()=>[(0,i.eW)("北少云")])),_:1}),(0,i.bF)(T,{slot:"bottom",icon:"logout",id:"logoutBtn",value:"logout"},{default:(0,i.k6)((()=>[(0,i.eW)("登出")])),_:1})])),_:1}),(0,i.bF)(D,{class:"mdui-m-t-2"},{default:(0,i.k6)((()=>[(0,i.bF)(S,null,{default:(0,i.k6)((()=>[s])),_:1})])),_:1}),(0,i.bF)(P,{"full-width":""},{default:(0,i.k6)((()=>[(0,i.bF)(N,{icon:"arrow_backward",id:"lastPageBtn"}),(0,i.bF)(N,{id:"pageText"},{default:(0,i.k6)((()=>[(0,i.eW)("第1页，共1页")])),_:1}),(0,i.bF)(N,{"end-icon":"arrow_forward",id:"nextPageBtn"})])),_:1}),(0,i.bF)(z,{id:"deleteDialog","close-on-overlay-click":"",headline:"确认删除推流?",class:"example-action"},{default:(0,i.k6)((()=>[(0,i.bF)(W,{slot:"action",variant:"text",id:"dialogCancelBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1}),(0,i.bF)(W,{slot:"action",variant:"tonal",id:"dialogConfirmBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("删除")])),_:1})])),_:1}),(0,i.bF)(z,{id:"paymentDialog","stacked-actions":"","close-on-overlay-click":"",headline:"开通推流",class:"example-action"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",c,[l,d,u,h,(0,i.bF)(W,{variant:"text",id:"useCdkBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("使用兑换码")])),_:1})]),(0,i.Lk)("div",m,[f,(0,i.bF)(j,{style:{width:"200px"},id:"monthSlider"})]),(0,i.Lk)("div",g,[p,v,(0,i.bF)(W,{variant:"text",id:"paymentUpdateBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("升级类型")])),_:1})]),(0,i.bF)(q,{value:"hdVideo",id:"radio"},{default:(0,i.k6)((()=>[(0,i.bF)(U,{value:"hdVideo"},{default:(0,i.k6)((()=>[(0,i.eW)("高清视频")])),_:1}),(0,i.bF)(U,{value:"video"},{default:(0,i.k6)((()=>[(0,i.eW)("视频")])),_:1}),(0,i.bF)(U,{value:"pic"},{default:(0,i.k6)((()=>[(0,i.eW)("图片")])),_:1})])),_:1}),(0,i.bF)(W,{slot:"action",variant:"text",id:"dialogAlipayBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("支付宝")])),_:1}),(0,i.bF)(W,{slot:"action",variant:"text",id:"dialogWechatBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("微信")])),_:1}),(0,i.bF)(W,{slot:"action",variant:"text",id:"cancelPaymentBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1})])),_:1}),(0,i.bF)(z,{id:"changeDialog","close-on-overlay-click":"",headline:"新增推流",class:"example-action"},{default:(0,i.k6)((()=>[(0,i.bF)(R,{style:{"margin-bottom":"16px"},label:"备注名称",id:"streamName"}),(0,i.bF)(R,{style:{"margin-bottom":"16px"},label:"推流地址",id:"streamUrl"}),(0,i.bF)(R,{style:{"margin-bottom":"16px"},label:"推流密钥",id:"streamKey"}),(0,i.bF)(H,{id:"selectMenu",label:"素材"}),(0,i.bF)(W,{slot:"action",variant:"text",id:"changeCancelBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1}),(0,i.bF)(W,{slot:"action",variant:"tonal",id:"changeConfirmBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("确定")])),_:1})])),_:1}),(0,i.bF)(z,{id:"updateDialog","stacked-actions":"","close-on-overlay-click":"",headline:"升级推流",class:"example-action"},{default:(0,i.k6)((()=>[k,_,y,b,(0,i.bF)(W,{slot:"action",variant:"text",id:"updateAlipayBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("支付宝")])),_:1}),(0,i.bF)(W,{slot:"action",variant:"text",id:"updateWechatBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("微信")])),_:1}),(0,i.bF)(W,{slot:"action",variant:"text",id:"cancelUpdateBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1})])),_:1}),(0,i.bF)(z,{id:"cdkDialog","close-on-overlay-click":"",headline:"使用兑换码",description:"加群留意活动即可获得！",class:"example-action"},{default:(0,i.k6)((()=>[(0,i.bF)(R,{label:"兑换码",id:"cdkInput",style:{"margin-bottom":"24px"}}),(0,i.bF)(W,{slot:"action",variant:"text",id:"cdkCancelBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1}),(0,i.bF)(W,{slot:"action",variant:"tonal",id:"cdkConfirmBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("确认")])),_:1})])),_:1}),(0,i.bF)(z,{id:"qrcodeDialog",headline:"扫码支付",class:"example-action"},{default:(0,i.k6)((()=>[B,(0,i.bF)(W,{slot:"action",variant:"text",id:"cancelOrderBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1})])),_:1}),(0,i.bF)(z,{fullscreen:"",class:"example-fullscreen",id:"logDialog"},{default:(0,i.k6)((()=>[(0,i.eW)(" 运行日志"),E,w,(0,i.bF)(W,{id:"logDialogCloseBtn"},{default:(0,i.k6)((()=>[(0,i.eW)("关闭")])),_:1})])),_:1})],64)}n(4114),n(4603),n(7566),n(8721);var x=n(1631),C=n(5324),I=n(6543),A=n.n(I),F=n(3567),M=n(5098);let T=1;const O=8;let S,D=1,N=0,P=0,W=0,z=0,j=!1,U=0,q=0;function R(){const e=document.getElementById("paymentDialog"),t=document.getElementById("qrcodeDialog");document.getElementById("materialBtn").addEventListener("click",(function(){M.A.push("/material")})),X().then((e=>{e&&401===e.code?M.A.push("/?login=1"):K(e)})).catch((e=>{console.error("处理响应时出错:",e)})),Z(1,30).then((e=>{ee(e)})).catch((e=>{console.error("处理响应时出错:",e)})),fetch(x.F+"/price",{headers:{Authorization:`Bearer ${(0,x.A)()}`}}).then((e=>{if(!e.ok)throw new Error("错误响应码");return e.json()})).then((e=>{200===e.code?(W=e.picPrice,P=e.videoPrice,N=e.hdVideoPrice):(switchBtn.checked=!1,(0,F.o)({message:e.msg}))})).catch((e=>{console.error("检测到错误",e)})),(0,C.A)(),document.getElementById("lastPageBtn").addEventListener("click",(function(){T>1?(T--,X().then((e=>{K(e)})).catch((e=>{console.error("处理响应时出错:",e)}))):(0,F.o)({message:"已经到尽头啦>.<"})})),document.getElementById("nextPageBtn").addEventListener("click",(function(){D>T?(T++,X().then((e=>{K(e)})).catch((e=>{console.error("处理响应时出错:",e)}))):(0,F.o)({message:"已经到尽头啦>.<"})}));const n=document.getElementById("logoutBtn");n.addEventListener("click",(function(){localStorage.removeItem("userToken"),localStorage.removeItem("userAdmin"),M.A.push("/")}));const i=document.getElementById("cancelOrderBtn");i.addEventListener("click",(function(){t.open=!1;const e=document.getElementById("qrcode");while(e.firstChild)e.removeChild(e.firstChild)}));const o=document.getElementById("radio");o.addEventListener("click",(function(){Q()}));const a=document.getElementById("monthSlider");a.value=1,a.min=1,a.max=12,a.addEventListener("input",(function(){Q()}));const r=document.getElementById("dialogAlipayBtn");r.addEventListener("click",(function(){$("ALIPAY",a.value),e.open=!1}));const s=document.getElementById("cancelPaymentBtn");s.addEventListener("click",(function(){e.open=!1}));const c=document.getElementById("dialogWechatBtn");c.addEventListener("click",(function(){$("WECHAT",a.value),e.open=!1}));const l=document.getElementById("updateDialog"),d=document.getElementById("cancelUpdateBtn");d.addEventListener("click",(function(){l.open=!1}));const u=document.getElementById("updateAlipayBtn");u.addEventListener("click",(function(){$("ALIPAY",0),l.open=!1}));const h=document.getElementById("updateWechatBtn");h.addEventListener("click",(function(){$("WECHAT",0),l.open=!1}));const m=document.getElementById("cdkDialog"),f=document.getElementById("useCdkBtn");f.addEventListener("click",(function(){m.open=!0}));const g=document.getElementById("cdkCancelBtn");g.addEventListener("click",(function(){m.open=!1}));const p=document.getElementById("cdkConfirmBtn");p.addEventListener("click",(function(){p.loading=!0,G()}));const v=document.getElementById("createStreamBtn");v.addEventListener("click",(function(){const e=document.getElementById("changeDialog");e.headline="新增推流",e.description="",e.open=!0,U=0}));const k=document.getElementById("changeConfirmBtn");k.addEventListener("click",(function(){if(0===U){const e={name:document.getElementById("streamName").value,url:document.getElementById("streamUrl").value,key:document.getElementById("streamKey").value,materialId:q};fetch(x.F+"/stream",{method:"POST",headers:{Authorization:"Bearer "+(0,x.A)(),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("错误响应码");return e.json()})).then((e=>{changeDialog.open=!1,200===e.code?((0,F.o)({message:"创建成功"}),X().then((e=>{K(e)})).catch((e=>{console.error("处理响应时出错:",e)}))):(0,F.o)({message:e.msg})})).catch((e=>{console.error("检测到错误",e),(0,F.o)({message:"操作出错，请重试！"})}))}else{const e=document.getElementById("streamName").value,t=document.getElementById("streamUrl").value,n=document.getElementById("streamKey").value,i={id:U,name:e||void 0,url:t||void 0,key:n||void 0,materialId:q||void 0};fetch(x.F+"/stream",{method:"PUT",headers:{Authorization:"Bearer "+(0,x.A)(),"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>{if(!e.ok)throw new Error("错误响应码");return e.json()})).then((e=>{changeDialog.open=!1,200===e.code?((0,F.o)({message:"更新成功"}),X().then((e=>{K(e)})).catch((e=>{console.error("处理响应时出错:",e)}))):(0,F.o)({message:e.msg})})).catch((e=>{console.error("检测到错误",e),(0,F.o)({message:"操作出错，请重试！"})}))}}));const _=document.getElementById("changeCancelBtn");_.addEventListener("click",(function(){changeDialog.open=!1}));const y=document.getElementById("refreshBtn");y.addEventListener("click",(function(){y.loading=!0,X().then((e=>{200===e.code&&(K(e),(0,F.o)({message:"刷新成功"}),y.loading=!1)})).catch((e=>{console.error("处理响应时出错:",e),(0,F.o)({message:"刷新失败"}),y.loading=!1}))}))}function H(e){return e.length>20?e.substring(0,20)+"...":e}function V(e){const t={id:e};fetch(x.F+"/switch-stream",{method:"POST",headers:{Authorization:"Bearer "+(0,x.A)(),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("错误响应码");return e.json()})).then((e=>{if(200===e.code){const t="ON"===e.status;S.disabled=!0,(0,F.o)({message:"推流"+(t?"开启":"关闭")+"中，请稍等..."})}else S.disabled=!0,(0,F.o)({message:e.msg});setTimeout((()=>{X().then((e=>{K(e)})).catch((e=>{console.error("处理响应时出错:",e)}))}),5e3)})).catch((e=>{console.error("检测到错误",e),(0,F.o)({message:"操作出错，请重试！"})}))}function K(e){const t=document.getElementById("deleteDialog"),n=document.getElementById("paymentDialog"),i=document.getElementById("material-list-tbody");if(i.innerHTML="",e&&e.list){if(D=e.total/O,D=Math.ceil(e.total/O),0===D&&(D=1),document.getElementById("pageText").textContent="第"+T+"页，共"+D+"页",0===e.list.length)return void(i.innerHTML='<tr><td colspan="6" class="mdui-text-center">此页没有推流，请先创建</td></tr>');e.list.forEach((e=>{const o=e.expired<=0,a=document.createElement("tr");["name","streamUrl","streamKey","materialName"].forEach((t=>{const n=document.createElement("td");if("streamUrl"===t||"streamKey"===t){const i=document.createElement("a"),o=document.createElement("mdui-tooltip");o.content="点击复制",n.addEventListener("click",(()=>{navigator.clipboard.writeText(e[t]).then((()=>{(0,F.o)({message:"复制成功"})}))})),i.innerHTML=H(e[t]),o.appendChild(i),n.appendChild(o)}else n.textContent=H(e[t]);if("materialName"===t){const t=document.createElement("mdui-tooltip"),i=document.createElement("mdui-icon");"HD_VIDEO"===e.materialType?(t.content="该推流允许使用高清视频或图片素材",i.style="color: orange",i.name="hd"):"VIDEO"===e.materialType?(t.content="该推流允许使用视频或图片素材",i.style="color: orange",i.name="ondemand_video"):(t.content="该推流仅能使用图片素材",i.style="color: gray",i.name="photo"),t.appendChild(i),n.appendChild(t)}a.appendChild(n)}));const r=document.createElement("td");e.expired<=0?r.textContent="已到期":e.expired<6e4?r.textContent="即将到期":e.expired<36e5?r.textContent=(e.expired/6e4).toFixed(0)+"分钟":r.textContent=(e.expired/36e5).toFixed(1)+"小时",a.appendChild(r);const s=document.createElement("td"),c=document.createElement("mdui-switch");c.className="div",c.checked="OFF"!==e.status,c.addEventListener("change",(()=>{S=c,V(e.id)})),s.appendChild(c),a.appendChild(s);const l=document.createElement("td"),d=document.createElement("mdui-chip");d.innerHTML=o?"开通":"续费",d.style="margin-right: 1px",d.addEventListener("click",(()=>{Q();const t=document.getElementById("radio");let i=!1;const a=document.getElementById("paymentUpdateBtn");if(o)n.headline="开通推流",t.disabled=!1,a.style.display="none";else{let o,r;n.headline="续费推流",t.disabled=!0,"VIDEO"===e.materialType&&(i=!0,t.value="video",o="可使用高清视频及图片素材",r=(N-P)/30),"PIC"===e.materialType&&(i=!0,t.value="pic",o="可使用视频及图片素材",r=(P-W)/30),"HD_VIDEO"===e.materialType&&(t.value="hdVideo"),i?(a.style.display="",a.addEventListener("click",(()=>{const t=e.expired/864e5;document.getElementById("lastDayText").textContent=t.toFixed()+" 天",document.getElementById("updatePriceText").textContent=(r*t).toFixed(2)+" 元";const n=document.getElementById("updateDialog");n.description=o,n.open=!0,z=e.id}))):a.style.display="none"}n.open=!0,Q(),z=e.id,S=c,j="OFF"!==e.status})),l.appendChild(d);const u=document.createElement("mdui-chip");u.innerHTML="更改",u.style="margin-right: 1px",u.addEventListener("click",(()=>{const t=document.getElementById("changeDialog");t.headline="更新推流",t.description="无变更内容可留空",t.open=!0,U=e.id})),l.appendChild(u);const h=document.createElement("mdui-chip");h.innerHTML="日志",h.style="margin-right: 1px",h.addEventListener("click",(()=>{const t=document.getElementById("logDialog"),n=document.getElementById("logDiv");n.innerHTML="";const i=new URLSearchParams({id:e.id}),o=x.F+`/stream-log?${i.toString()}`;fetch(o,{headers:{Authorization:`Bearer ${(0,x.A)()}`}}).then((e=>{if(!e.ok)throw(0,F.o)({message:"获取日志出错"}),new Error("错误响应码");return e.json()})).then((e=>{200===e.code?0===e.log.length?(0,F.o)({message:"该推流暂无日志，请先启动"}):(e.log.forEach((e=>{const t=document.createElement("p");t.innerHTML=e,n.appendChild(t)})),t.open=!0):(0,F.o)({message:"获取日志失败"+resJson.msg})})).catch((e=>{console.error("检测到错误",e)}));const a=document.getElementById("logDialogCloseBtn");a.addEventListener("click",(()=>t.open=!1))})),l.appendChild(h);const m=document.createElement("mdui-chip");m.innerHTML="删除",m.addEventListener("click",(()=>{t.open=!0,t.description=e.name;const n=document.getElementById("dialogCancelBtn"),i=document.getElementById("dialogConfirmBtn");n.addEventListener("click",(()=>{t.open=!1})),i.addEventListener("click",(()=>{t.open=!1;const n={id:e.id};fetch(x.F+"/stream",{method:"DELETE",headers:{Authorization:"Bearer "+(0,x.A)(),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("错误响应码");return e.json()})).then((e=>{200===e.code?((0,F.o)({message:"删除成功"}),a.parentNode.removeChild(a)):(0,F.o)({message:e.msg})})).catch((e=>{console.error("检测到错误",e)}))}))})),l.appendChild(m),a.appendChild(l),i.appendChild(a)}))}else i.innerHTML='<tr><td colspan="6" class="mdui-text-center">获取推流失败，请刷新列表</td></tr>'}function $(e="ALIPAY",t=1){let n;j&&V(z),(0,F.o)({message:"正在创建订单，请稍后..."});const i=document.getElementById("radio");n="pic"===i.value?"PIC":"video"===i.value?"VIDEO":"HD_VIDEO";const o={id:z,type:e,month:t,materialType:n};fetch(x.F+"/pay",{method:"POST",headers:{Authorization:"Bearer "+(0,x.A)(),"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>{if(!e.ok)throw new Error("错误响应码");return e.json()})).then((e=>{if(200===e.code){const t=new(A());t.backgroundAlpha=.5,t.foregroundAlpha=.9,t.size=250,t.value=e.qrcode;const n=t.toDataURL(),i=new Image;i.src=n;const o=document.getElementById("qrcode");while(o.firstChild)o.removeChild(o.firstChild);i.onload=function(){o.appendChild(i)},qrcodeDialog.description="付款价格："+e.price/100+" 元",qrcodeDialog.open=!0,J(e.order,3e3)}else(0,F.o)({message:e.msg})})).catch((e=>{console.error("检测到错误",e),(0,F.o)({message:"请求支付时出错，请重试！"})}))}function G(){const e=document.getElementById("cdkConfirmBtn"),t=document.getElementById("cdkInput");if(!t.value)return e.loading=!1,void(0,F.o)({message:"兑换码不可为空"});const n={id:z,cdk:t.value?t.value:void 0};fetch(x.F+"/cdk",{method:"POST",headers:{Authorization:"Bearer "+(0,x.A)(),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("错误响应码");return e.json()})).then((t=>{200===t.code?((0,F.o)({message:"兑换成功"}),paymentDialog.open=!1,X().then((e=>{K(e)})).catch((e=>{console.error("处理响应时出错:",e)}))):(0,F.o)({message:t.msg}),e.loading=!1})).catch((t=>{console.error("检测到错误",t),(0,F.o)({message:"处理兑换请求时出错，请重试！"}),e.loading=!1})),document.getElementById("cdkDialog").open=!1,document.getElementById("cdkConfirmBtn").loading=!1}async function J(e,t=3e3){do{const n=await Y(e);if(200===n.code){qrcodeDialog.open=!1,(0,F.o)({message:"支付成功"}),X().then((e=>{K(e)})).catch((e=>{console.error("处理响应时出错:",e)}));break}if(5e3!==n.code){(0,F.o)({message:n.msg}),qrcodeDialog.open=!1;break}await new Promise((e=>setTimeout(e,t)))}while(1)}async function Y(e){try{const t=new URLSearchParams({order:e}),n=x.F+`/pay?${t.toString()}`,i=await fetch(n,{headers:{Authorization:`Bearer ${(0,x.A)()}`}});return await i.json()}catch(t){return console.error("请求推流时出错:",t),null}}async function X(){try{const e=new URLSearchParams({page:T.toString(),size:O.toString()}),t=x.F+`/stream?${e.toString()}`,n=await fetch(t,{headers:{Authorization:`Bearer ${(0,x.A)()}`}});return await n.json()}catch(e){return console.error("请求推流时出错:",e),null}}function Q(){if(0===W||0===P)return void(0,F.o)({message:"获取价格出错，请刷新页面"});const e=document.getElementById("priceText"),t=document.getElementById("radio");let n;"pic"===t.value?n=W:"video"===t.value?n=P:"hdVideo"===t.value&&(n=N),e.textContent=monthSlider.value*n+" 元"}async function Z(e=1,t=30){try{const n=new URLSearchParams({page:e.toString(),size:t.toString()}),i=x.F+`/material?${n.toString()}`,o=await fetch(i,{headers:{Authorization:`Bearer ${(0,x.A)()}`}});return await o.json()}catch(n){return console.error("请求素材库时出错:",n),null}}function ee(e){const t=document.getElementById("selectMenu");if(e&&e.list){if(0===e.list.length)return t.label="请先上传素材",void(t.disabled=!0);e.list.forEach((e=>{const n=document.createElement("mdui-menu-item");n.innerHTML=e.name,n.value="item-"+e.id,n.addEventListener("click",(()=>{q=e.id})),t.appendChild(n)}))}else t.label="获取素材失败",t.disabled=!0}var te={mounted(){R()}},ne=n(1241);const ie=(0,ne.A)(te,[["render",L]]);var oe=ie},6955:function(e,t,n){"use strict";var i=n(2140),o=n(4901),a=n(4576),r=n(8227),s=r("toStringTag"),c=Object,l="Arguments"===a(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(n){}};e.exports=i?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=d(t=c(e),s))?n:l?a(t):"Object"===(i=a(t))&&o(t.callee)?"Arguments":i}},2140:function(e,t,n){"use strict";var i=n(8227),o=i("toStringTag"),a={};a[o]="z",e.exports="[object z]"===String(a)},655:function(e,t,n){"use strict";var i=n(6955),o=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},4603:function(e,t,n){"use strict";var i=n(6840),o=n(9504),a=n(655),r=n(2812),s=URLSearchParams,c=s.prototype,l=o(c.append),d=o(c["delete"]),u=o(c.forEach),h=o([].push),m=new s("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&i(c,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return d(this,e);var i=[];u(this,(function(e,t){h(i,{key:t,value:e})})),r(t,1);var o,s=a(e),c=a(n),m=0,f=0,g=!1,p=i.length;while(m<p)o=i[m++],g||o.key===s?(g=!0,d(this,o.key)):f++;while(f<p)o=i[f++],o.key===s&&o.value===c||l(this,o.key,o.value)}),{enumerable:!0,unsafe:!0})},7566:function(e,t,n){"use strict";var i=n(6840),o=n(9504),a=n(655),r=n(2812),s=URLSearchParams,c=s.prototype,l=o(c.getAll),d=o(c.has),u=new s("a=1");!u.has("a",2)&&u.has("a",void 0)||i(c,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return d(this,e);var i=l(this,e);r(t,1);var o=a(n),s=0;while(s<i.length)if(i[s++]===o)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(e,t,n){"use strict";var i=n(3724),o=n(9504),a=n(2106),r=URLSearchParams.prototype,s=o(r.forEach);i&&!("size"in r)&&a(r,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=130.46daa060.js.map